<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
         //콜백함수(Call Back)
         // 함수를 호출하는 시점이 바뀌어진 형태의 함수
         // 기존방식 : 사용자(개발자)가 함수를 직접 정의 -> 정의된 함수를 호출(Call) 하여 결과를 반환받는 방식
         // Call Back :  콜백함수의 인자로 수행로직(()=>{}, function(){})을 전달하여 콜백함수로부터 처리된 결과를 반환받는 형태

         function func(n1,n2){
            const result = n1+n2;
            return result;
         }
         const r  = func(10,20);       // Call
         console.log(r);

         function callbackFunc(n1,n2,func){
            const result = func(n1,n2);
            return result;
         }
         function sum(n1,n2){return n1+n2};
         function sub(n1,n2){return n1-n2};
         function mul(n1,n2){return n1*n2};
         function div(n1,n2){return n1/n2};

         const r1 = callbackFunc(20,4,sum); // 함수가 만들어져 있는 위치(로직)전달
         const r2 = callbackFunc(20,4,sub);
         const r3 = callbackFunc(20,4,mul);
         const r4 = callbackFunc(20,4,div);  
         console.log(r1);
         console.log(r2);
         console.log(r3);
         console.log(r4);

         const data = [11,20,41,15,7,1,51];
         function simForEach(data,func){
            
            data.sort((a,b)=>{return a-b;}) // sort
            data.val((a,b)=>{return a-b;})
            const val = data.sort((a,b)=>{return a-b;})
                .reduce((sum,item)=>{return sum+item},0)
            
            console.log(data);
            console.log(val);
            data.push(val);

            for(idx in data){
                func(data[idx]);
            }
            
         }
         simForEach(data,(item)=>{
            console.log(item);
         });

         //문제
         function callbackfunc(func1,func2,func3,...args){
            const arr1=func1(args); //가변인자를 받아서 그 배열 요소 중 숫자만 필터링된 배열 반환
            console.log("숫자필터링된 배열 : " + arr1);
            const arr2 = func2(arr1); // 숫자만 필터링된 배열중 짝수만 걸러서 배열로 반환
            console.log("짝수만 필터링된 배열 : " + arr2);
            const arr3 = func3(arr2); // 짝수로 걸러진 배열의 합을 구함
            return arr3;
        
         }
         function proc1(arr){return arr.filter((item)=>typeof item =='number')} //가변인자배열 중 숫자
         function proc2(arr){return arr.filter((item)=>item%2==0)}
         function proc3(arr){return arr.filter((sum,item)=>sum+item,0)}

         const rVal = callbackfunc(proc1,proc2,proc3, 10,20,'true',11,152,999,24,'문자열',null,155,24);
         console.log('rVal : ',rVal);
    </script>
</body>
</html>